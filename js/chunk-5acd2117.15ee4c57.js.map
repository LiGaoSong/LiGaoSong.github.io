{"version":3,"sources":["webpack:///./src/views/category/Cartgory.vue?081f","webpack:///./src/views/category/Cartgory.vue","webpack:///./src/network/cartgory.js","webpack:///./src/views/category/Cartgory.vue?e517"],"names":["class","_createVNode","_component_top_nav","_createElementVNode","_component_van_collapse","$setup","$event","_createElementBlock","_Fragment","_renderList","item","index","_createBlock","_component_van_collapse_item","key","title","name","_component_van_sidebar","children","sub","_component_van_sidebar_item","id","onClick","_component_van_tabs","active","_component_van_tab","_component_van_card","num","sales","price","thumb","cover_url","_component_bottom_nav","getCategory","request","url","getCategoryGoods","order","cid","page","components","TopNav","BottomNav","setup","router","useRouter","activeNames","ref","activekey","goods","reactive","list","comments_count","currentOrder","currentCid","getcurrentCid","value","init","showGoods","computed","then","res","data","goodsRecommend","push","tabClick","categories","onMounted","loading","message","forbidClick","goD","path","query","__exports__","render"],"mappings":"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","file":"js/chunk-5acd2117.15ee4c57.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Cartgory.vue?vue&type=style&index=0&id=145cbe41&lang=scss&scoped=true\"","<template>\r\n  <top-nav> 分类 </top-nav>\r\n\r\n  <div class=\"main-box\">\r\n    <div class=\"main-box-left\">\r\n      <van-collapse v-model=\"activeNames\">\r\n        <van-collapse-item\r\n          v-for=\"(item, index) in categories\"\r\n          :key=\"index\"\r\n          :title=\"item.name\"\r\n          :name=\"index\"\r\n        >\r\n          <van-sidebar v-model=\"activekey\">\r\n            <van-sidebar-item\r\n              v-for=\"sub in item.children\"\r\n              :key=\"sub.id\"\r\n              :title=\"sub.name\"\r\n              @click=\"getcurrentCid(sub.id)\"\r\n            />\r\n          </van-sidebar>\r\n        </van-collapse-item>\r\n      </van-collapse>\r\n    </div>\r\n    <div class=\"main-box-right\">\r\n      <div class=\"top\">\r\n        <van-tabs v-model:active=\"active\" @click=\"tabClick\">\r\n          <van-tab title=\"销量排序\"></van-tab>\r\n          <van-tab title=\"价格排序\"></van-tab>\r\n          <van-tab title=\"评论排序\"></van-tab>\r\n        </van-tabs>\r\n      </div>\r\n      <div class=\"bottom\">\r\n        <van-card\r\n          v-for=\"item in showGoods\"\r\n          :key=\"item.id\"\r\n          :num=\"item.sales\"\r\n          :price=\"item.price + '.00'\"\r\n          :title=\"item.title\"\r\n          :thumb=\"item.cover_url\"\r\n          @click=\"goD(item.id)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <bottom-nav></bottom-nav>\r\n</template>\r\n\r\n<script>\r\nimport BottomNav from '../../components/BottomNav.vue'\r\nimport TopNav from \"../../components/TopNav.vue\";\r\nimport { ref, reactive, toRefs, onMounted, computed } from \"vue\";\r\nimport { getCategory, getCategoryGoods } from \"../../network/cartgory\";\r\nimport { Toast } from \"vant\";\r\nimport {useRouter} from 'vue-router'\r\nexport default {\r\n  name: \"Cartgory\",\r\n  components: { TopNav,BottomNav },\r\n  setup() {\r\n\r\n    const router = useRouter()\r\n    const activeNames = ref([\"1\"]);\r\n    const active = ref(0);\r\n    const activekey = ref(0);\r\n\r\n    //商品推荐\r\n    const goods = reactive({\r\n      sales: { page: 1, list: [] },\r\n      price: { page: 1, list: [] },\r\n      comments_count: { page: 1, list: [] },\r\n    });\r\n    //标签栏id\r\n    let currentOrder = ref(\"sales\");\r\n\r\n    //侧边栏id\r\n    let currentCid = ref(0);\r\n\r\n    const getcurrentCid = (id) => {\r\n      currentCid.value = id;\r\n      init();\r\n    };\r\n\r\n    const showGoods = computed(() => {\r\n      return goods[currentOrder.value].list;\r\n    });\r\n\r\n    const init = async () => {\r\n      await getCategoryGoods(\"sales\", currentCid.id).then((res) => {\r\n        goods.sales.list = res.goods.data;\r\n      });\r\n      await getCategoryGoods(\"price\", currentCid.id).then((res) => {\r\n        goods.price.list = res.goods.data;\r\n      });\r\n      await getCategoryGoods(\"comments_count\", currentCid.id).then((res) => {\r\n        goods.comments_count.list = res.goods.data;\r\n      });\r\n    };\r\n\r\n    const goodsRecommend = () => {\r\n      const page = goods[currentOrder.value].page + 1;\r\n      getCategoryGoods(currentCid.value, currentOrder.value).then((res) => {\r\n        goods[currentOrder.value].list.push(...res.goods.data);\r\n        goods[currentOrder.value].page += 1;\r\n      });\r\n    };\r\n\r\n    const tabClick = (index) => {\r\n      const order = [\"sales\", \"price\", \"comments_count\"];\r\n      currentOrder.value = order[index];\r\n      goodsRecommend();\r\n    };\r\n\r\n    //左侧边栏数据\r\n    let categories = ref([]);\r\n    onMounted(async () => {\r\n      Toast.loading({ message: \"加载中\", forbidClick: true });\r\n      await getCategory().then((res) => {\r\n        categories.value = res.categories;\r\n      });\r\n\r\n      init();\r\n    });\r\n\r\n    const goD = (id) => {\r\n        router.push({path:'/detail', query:{id}})\r\n    }\r\n    return {\r\n      activeNames,\r\n      categories,\r\n      active,\r\n      activekey,\r\n      showGoods,\r\n      getcurrentCid,\r\n      tabClick,\r\n      goD\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.main-box {\r\n  width: 100%;\r\n  margin-top: 50px;\r\n  margin-bottom: 60px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  .main-box-left {\r\n    flex: 1;\r\n    margin-top: 45px;\r\n  }\r\n  .main-box-right {\r\n    flex: 3;\r\n    .bottom {\r\n      text-align: left;\r\n    }\r\n  }\r\n}\r\n</style>\r\n>\r\n","import { request } from \"./request\";\r\n\r\n\r\n//请求首页数据\r\nexport function getCategory() {\r\n    return request({\r\n        url: '/api/goods',\r\n\r\n    })\r\n}\r\n\r\nexport function getCategoryGoods(order='sales', cid=0, page=1) {\r\n    return request({\r\n        url: '/api/goods?category_id='+cid+'&page='+page+'&'+order+'=1',\r\n\r\n    })\r\n}","import { render } from \"./Cartgory.vue?vue&type=template&id=145cbe41&scoped=true\"\nimport script from \"./Cartgory.vue?vue&type=script&lang=js\"\nexport * from \"./Cartgory.vue?vue&type=script&lang=js\"\n\nimport \"./Cartgory.vue?vue&type=style&index=0&id=145cbe41&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\练习\\\\copyesbook\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-145cbe41\"]])\n\nexport default __exports__"],"sourceRoot":""}